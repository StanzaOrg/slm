defpackage slm/commands/repl:
  import core

  import slm/file-utils
  import slm/process-utils

public defn repl (args0: Tuple<String>) -> False:
  val args = to-tuple $ cat-all([["stanza", "repl"], args0, ["-pkg", "pkgs"]])
  val slm-dir = to-string("%_/.slm" % [get-cwd()])

  ProcessBuilder(args)
    $> in-dir{_, slm-dir}
    $> build
    $> run-and-get-exit-code
    $> exit

  false
